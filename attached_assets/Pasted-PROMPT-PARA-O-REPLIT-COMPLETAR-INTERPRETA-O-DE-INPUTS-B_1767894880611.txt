PROMPT PARA O REPLIT â€” COMPLETAR INTERPRETAÃ‡ÃƒO DE INPUTS (BASEADO NA RECEITA)
Contexto
O arquivo interpreter.ts interpreta comandos de voz vindos da Alexa e retorna { intent, confidence, entities }.
Atualmente ele reconhece corretamente controle de processo, inÃ­cio de lote, floculaÃ§Ã£o e consultas de insumos, mas nÃ£o cobre todos os inputs obrigatÃ³rios definidos na recipe.yml, o que gera bloqueios legÃ­timos como:
Missing required inputs: cut_point_time
Missing required inputs: press_start_time
Missing required inputs: chamber_2_entry_date
ğŸ¯ Objetivo
Atualizar o interpreter.ts para cobrir TODOS os inputs da receita, de forma genÃ©rica, escalÃ¡vel e sem criar lÃ³gica de negÃ³cio no LLM.
ğŸ”§ AlteraÃ§Ãµes obrigatÃ³rias no interpreter.ts
1ï¸âƒ£ Generalizar registro de HORÃRIOS (log_time)
O intent log_time deve ser usado sempre que o usuÃ¡rio mencionar hora/horÃ¡rio relacionada a qualquer etapa.
Mapear entities.time_type para:
"time_type":
  | "flocculation"
  | "cut_point"
  | "press_start"
  | null
Exemplos que DEVEM funcionar:
â€œa floculaÃ§Ã£o foi Ã s cinco e vinteâ€
â€œhora do ponto de corte catorze trinta e noveâ€
â€œiniciei a prensa Ã s dezessete horasâ€
2ï¸âƒ£ Registrar DATAS (log_date)
Criar intent lÃ³gico log_date para datas de processo.
Usar para:
chamber_2_entry_date
Exemplos:
â€œcoloquei na cÃ¢mara dois hojeâ€
â€œentrada na cÃ¢mara dois foi dia oito do umâ€
â€œfoi para a cÃ¢mara dois em oito de janeiroâ€
Entities esperadas:
date_type: "chamber_2_entry"
date_value: "YYYY-MM-DD"
3ï¸âƒ£ Registrar VALORES NUMÃ‰RICOS (log_number)
Usar log_number para qualquer nÃºmero manual:
pH intermediÃ¡rio
quantidade de peÃ§as
temperatura informada fora do inÃ­cio do lote
Mapear number_type:
"number_type":
  | "ph_value"
  | "pieces_quantity"
  | "milk_temperature"
  | null
Exemplos:
â€œo pH agora Ã© cinco ponto doisâ€
â€œtem doze peÃ§asâ€
â€œa temperatura estÃ¡ em trinta grausâ€
4ï¸âƒ£ Manter query_input para insumos calculados
Continuar usando:
input_type:
  | "FERMENT_LR"
  | "FERMENT_DX"
  | "FERMENT_KL"
  | "RENNET"
Reconhecer frases naturais:
â€œqual foi a quantidade de coalhoâ€
â€œquanto de DX eu useiâ€
â€œdose de KLâ€
5ï¸âƒ£ Melhorar reconhecimento de STATUS
Reconhecer como intent = "status":
â€œqual etapa estouâ€
â€œem que etapa estamosâ€
â€œme diga a etapaâ€
â€œqual Ã© o statusâ€
ğŸ“¦ Schema final esperado
intent:
  | "status"
  | "start_batch"
  | "advance"
  | "timer"
  | "help"
  | "log_time"
  | "log_date"
  | "log_number"
  | "query_input"
  | "unknown";

entities: {
  volume?: number | null;
  milk_temperature?: number | null;
  ph_value?: number | null;

  time_type?: "flocculation" | "cut_point" | "press_start" | null;
  time_value?: string | null; // HH:MM

  date_type?: "chamber_2_entry" | null;
  date_value?: string | null; // YYYY-MM-DD

  number_type?: "ph_value" | "pieces_quantity" | "milk_temperature" | null;
  number_value?: number | null;

  input_type?: "FERMENT_LR" | "FERMENT_DX" | "FERMENT_KL" | "RENNET" | null;
}
âœ… CritÃ©rio de aceite
ApÃ³s a alteraÃ§Ã£o:
â€œhora do ponto de corte catorze trinta e noveâ€ â†’ log_time (cut_point)
â€œiniciei a prensa Ã s dezesseteâ€ â†’ log_time (press_start)
â€œcoloquei na cÃ¢mara dois hojeâ€ â†’ log_date
â€œtem doze peÃ§asâ€ â†’ log_number (pieces_quantity)
Nenhum Missing required inputs fica sem diÃ¡logo possÃ­vel